{"remainingRequest":"/node/src/code-factory/node_modules/vue-loader/lib/index.js??vue-loader-options!/node/src/code-factory/lsrkyyezwbvy/src/components/validate.vue?vue&type=script&lang=js&","dependencies":[{"path":"/node/src/code-factory/lsrkyyezwbvy/src/components/validate.vue","mtime":1649314960141},{"path":"/node/src/code-factory/node_modules/cache-loader/dist/cjs.js","mtime":1648824486287},{"path":"/node/src/code-factory/node_modules/babel-loader/lib/index.js","mtime":1648824338096},{"path":"/node/src/code-factory/node_modules/cache-loader/dist/cjs.js","mtime":1648824486287},{"path":"/node/src/code-factory/node_modules/vue-loader/lib/index.js","mtime":1648824494917}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB2YWxpZGF0b3IgZnJvbSAidmFsaWRhdG9yIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAidmFsaWRhdGUiLAogIHByb3BzOiB7CiAgICB2YWx1ZToge30sCiAgICBydWxlczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogKCkgPT4gW10sCiAgICB9LAogICAgcHJvcDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICIiLAogICAgfSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAvLyDmoKHpqoznsbvlkI0g5piv5ZCm5q2j56GuCiAgICAgIHZhbGlkYXRlQ2xhc3NOYW1lOiAiIiwKICAgICAgLy8g6ZSZ6K+v5o+Q56S6CiAgICAgIGVycm9yTWVzc2FnZTogIiIsCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIC8vIOebkeWQrOWAvOWPmOWMliDop6blj5HmoKHpqozop4TliJkKICAgIHZhbHVlKG5ld1ZhbHVlKSB7CiAgICAgIHRoaXMudmFsaWRhdG9yKG5ld1ZhbHVlKTsKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICB0aWdnZXJWYWxpZGF0ZSgpewogICAgICByZXR1cm4gdGhpcy52YWxpZGF0b3IodGhpcy52YWx1ZSkKICAgIH0sCiAgICAvKiDmoKHpqozlk6rkupvop4TliJkKICAgICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZSDlvZPliY3ovpPlhaXlgLwKICAgICAqLwogICAgdmFsaWRhdG9yKHZhbHVlKSB7CiAgICAgIC8vIOaJgOacieeahOagoemqjOinhOWImeaJp+ihjAogICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnJ1bGVzLmZpbmQoKGl0ZW0pID0+IHsKICAgICAgICByZXR1cm4gaXRlbS5jaGVja2VkID8gdGhpcy52YWxpZGF0b3JDaGVjayhpdGVtLCB2YWx1ZSkgOiBmYWxzZTsKICAgICAgfSk7CiAgICAgIGlmIChyZXN1bHQpIHsKICAgICAgICAvLyDor7TmmI7pqozor4HkuI3pgJrov4cKICAgICAgICB0aGlzLmVycm9yTWVzc2FnZSA9IHJlc3VsdC5tZXNzYWdlOwogICAgICAgIHRoaXMudmFsaWRhdGVDbGFzc05hbWUgPSAiY29udGVudCI7CiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8g6aqM6K+B6YCa6L+HCiAgICAgICAgdGhpcy5tZXNzYWdlID0gIiI7CiAgICAgICAgdGhpcy52YWxpZGF0ZUNsYXNzTmFtZSA9ICIiOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICB9LAogICAgLyog6aqM6K+B5q+P5LiA6aG56KeE5YiZCiAgICAgKiBAcGFyYW0ge0FycmF5fSBydWxlIOagoemqjOinhOWImQogICAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlIOW9k+WJjei+k+WFpeWAvAogICAgICovCiAgICB2YWxpZGF0b3JDaGVjayhydWxlLCB2YWx1ZSkgewogICAgICBsZXQgaXNDaGVjayA9IGZhbHNlOwogICAgICBzd2l0Y2ggKHJ1bGUudHlwZSkgewogICAgICAgIGNhc2UgInJlcXVpcmVkIjoKICAgICAgICAgIC8vIOW/heWhq+mqjOivgQogICAgICAgICAgaXNDaGVjayA9IHZhbGlkYXRvci5pc0VtcHR5KHZhbHVlKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgImxpbWl0TnVtYmVycyI6CiAgICAgICAgICAvLyDmlbDlgLzpqozor4EKICAgICAgICAgIGlzQ2hlY2sgPSAhdmFsaWRhdG9yLmlzRmxvYXQodmFsdWUudG9TdHJpbmcoKSwgeyBtaW46IHJ1bGUubWluLCBtYXg6IHJ1bGUubWF4IH0pOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAid29yZExpbWl0IjoKICAgICAgICAgIC8vIOaVsOWtl+iMg+WbtOmqjOivgQogICAgICAgICAgaXNDaGVjayA9ICF2YWxpZGF0b3IuaXNMZW5ndGgodmFsdWUsIHsKICAgICAgICAgICAgbWluOiBydWxlLm1pbiwKICAgICAgICAgICAgbWF4OiBydWxlLm1heCwKICAgICAgICAgIH0pOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAibGltaXRJbnB1dFR5cGUiOgogICAgICAgICAgLy8g5q2j5YiZ6aqM6K+BCiAgICAgICAgICBpc0NoZWNrID0gIWV2YWwocnVsZS5wYXR0ZXJuKS50ZXN0KHZhbHVlKTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIHJldHVybiBpc0NoZWNrOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["validate.vue"],"names":[],"mappings":";;;;;;;;;;;;;;AAcA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"validate.vue","sourceRoot":"src/components","sourcesContent":["\n<template>\n  <div class=\"validate\">\n    <div :class=\"validateClassName\">\n      <slot></slot>\n    </div>\n    <div class=\"rule\" v-if=\"validateClassName\">\n      {{ \n        errorMessage\n      }} \n    </div>\n  </div>\n</template>\n<script>\nimport validator from \"validator\";\n\nexport default {\n  name: \"validate\",\n  props: {\n    value: {},\n    rules: {\n      type: Array,\n      default: () => [],\n    },\n    prop: {\n      type: String,\n      default: \"\",\n    },\n  },\n  data() {\n    return {\n      // 校验类名 是否正确\n      validateClassName: \"\",\n      // 错误提示\n      errorMessage: \"\",\n    };\n  },\n  watch: {\n    // 监听值变化 触发校验规则\n    value(newValue) {\n      this.validator(newValue);\n    },\n  },\n  methods: {\n    tiggerValidate(){\n      return this.validator(this.value)\n    },\n    /* 校验哪些规则\n     * @param {String} value 当前输入值\n     */\n    validator(value) {\n      // 所有的校验规则执行\n      const result = this.rules.find((item) => {\n        return item.checked ? this.validatorCheck(item, value) : false;\n      });\n      if (result) {\n        // 说明验证不通过\n        this.errorMessage = result.message;\n        this.validateClassName = \"content\";\n        return false\n      } else {\n        // 验证通过\n        this.message = \"\";\n        this.validateClassName = \"\";\n        return true;\n      }\n    },\n    /* 验证每一项规则\n     * @param {Array} rule 校验规则\n     * @param {String} value 当前输入值\n     */\n    validatorCheck(rule, value) {\n      let isCheck = false;\n      switch (rule.type) {\n        case \"required\":\n          // 必填验证\n          isCheck = validator.isEmpty(value);\n          break;\n        case \"limitNumbers\":\n          // 数值验证\n          isCheck = !validator.isFloat(value.toString(), { min: rule.min, max: rule.max });\n          break;\n        case \"wordLimit\":\n          // 数字范围验证\n          isCheck = !validator.isLength(value, {\n            min: rule.min,\n            max: rule.max,\n          });\n          break;\n        case \"limitInputType\":\n          // 正则验证\n          isCheck = !eval(rule.pattern).test(value);\n          break;\n      }\n      return isCheck;\n    },\n  },\n};\n</script>\n<style scoped lang=\"less\">\n.content {\n  > * {\n    border: 1px solid #e25246 !important ;\n    box-shadow: 0 0 0 2px rgba(226, 82, 70, 0.3) !important;\n  }\n}\n.rule {\n  color: #e25246;\n  transition: color 0.3s cubic-bezier(0.4, 0, 1, 1);\n}\n</style>\n"]}]}
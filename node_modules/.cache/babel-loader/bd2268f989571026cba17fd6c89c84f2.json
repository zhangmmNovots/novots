{"remainingRequest":"/node/src/code-factory/node_modules/babel-loader/lib/index.js!/node/src/code-factory/node_modules/cache-loader/dist/cjs.js??ref--1-0!/node/src/code-factory/node_modules/vue-loader/lib/index.js??vue-loader-options!/node/src/code-factory/lsrkyyezwbvy/src/components/validate.vue?vue&type=script&lang=js&","dependencies":[{"path":"/node/src/code-factory/lsrkyyezwbvy/src/components/validate.vue","mtime":1649314960141},{"path":"/node/src/code-factory/lsrkyyezwbvy/babel.config.js","mtime":1649314958358},{"path":"/node/src/code-factory/node_modules/cache-loader/dist/cjs.js","mtime":1648824486287},{"path":"/node/src/code-factory/node_modules/babel-loader/lib/index.js","mtime":1648824338096},{"path":"/node/src/code-factory/node_modules/cache-loader/dist/cjs.js","mtime":1648824486287},{"path":"/node/src/code-factory/node_modules/vue-loader/lib/index.js","mtime":1648824494917}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudGVzdC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB2YWxpZGF0b3IgZnJvbSAidmFsaWRhdG9yIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJ2YWxpZGF0ZSIsCiAgcHJvcHM6IHsKICAgIHZhbHVlOiB7fSwKICAgIHJ1bGVzOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgIH0sCiAgICBwcm9wOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogIiIKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAvLyDmoKHpqoznsbvlkI0g5piv5ZCm5q2j56GuCiAgICAgIHZhbGlkYXRlQ2xhc3NOYW1lOiAiIiwKICAgICAgLy8g6ZSZ6K+v5o+Q56S6CiAgICAgIGVycm9yTWVzc2FnZTogIiIKICAgIH07CiAgfSwKICB3YXRjaDogewogICAgLy8g55uR5ZCs5YC85Y+Y5YyWIOinpuWPkeagoemqjOinhOWImQogICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKG5ld1ZhbHVlKSB7CiAgICAgIHRoaXMudmFsaWRhdG9yKG5ld1ZhbHVlKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHRpZ2dlclZhbGlkYXRlOiBmdW5jdGlvbiB0aWdnZXJWYWxpZGF0ZSgpIHsKICAgICAgcmV0dXJuIHRoaXMudmFsaWRhdG9yKHRoaXMudmFsdWUpOwogICAgfSwKCiAgICAvKiDmoKHpqozlk6rkupvop4TliJkKICAgICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZSDlvZPliY3ovpPlhaXlgLwKICAgICAqLwogICAgdmFsaWRhdG9yOiBmdW5jdGlvbiB2YWxpZGF0b3IodmFsdWUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIC8vIOaJgOacieeahOagoemqjOinhOWImeaJp+ihjAogICAgICB2YXIgcmVzdWx0ID0gdGhpcy5ydWxlcy5maW5kKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0uY2hlY2tlZCA/IF90aGlzLnZhbGlkYXRvckNoZWNrKGl0ZW0sIHZhbHVlKSA6IGZhbHNlOwogICAgICB9KTsKCiAgICAgIGlmIChyZXN1bHQpIHsKICAgICAgICAvLyDor7TmmI7pqozor4HkuI3pgJrov4cKICAgICAgICB0aGlzLmVycm9yTWVzc2FnZSA9IHJlc3VsdC5tZXNzYWdlOwogICAgICAgIHRoaXMudmFsaWRhdGVDbGFzc05hbWUgPSAiY29udGVudCI7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIOmqjOivgemAmui/hwogICAgICAgIHRoaXMubWVzc2FnZSA9ICIiOwogICAgICAgIHRoaXMudmFsaWRhdGVDbGFzc05hbWUgPSAiIjsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgfSwKCiAgICAvKiDpqozor4Hmr4/kuIDpobnop4TliJkKICAgICAqIEBwYXJhbSB7QXJyYXl9IHJ1bGUg5qCh6aqM6KeE5YiZCiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWUg5b2T5YmN6L6T5YWl5YC8CiAgICAgKi8KICAgIHZhbGlkYXRvckNoZWNrOiBmdW5jdGlvbiB2YWxpZGF0b3JDaGVjayhydWxlLCB2YWx1ZSkgewogICAgICB2YXIgaXNDaGVjayA9IGZhbHNlOwoKICAgICAgc3dpdGNoIChydWxlLnR5cGUpIHsKICAgICAgICBjYXNlICJyZXF1aXJlZCI6CiAgICAgICAgICAvLyDlv4Xloavpqozor4EKICAgICAgICAgIGlzQ2hlY2sgPSB2YWxpZGF0b3IuaXNFbXB0eSh2YWx1ZSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAibGltaXROdW1iZXJzIjoKICAgICAgICAgIC8vIOaVsOWAvOmqjOivgQogICAgICAgICAgaXNDaGVjayA9ICF2YWxpZGF0b3IuaXNGbG9hdCh2YWx1ZS50b1N0cmluZygpLCB7CiAgICAgICAgICAgIG1pbjogcnVsZS5taW4sCiAgICAgICAgICAgIG1heDogcnVsZS5tYXgKICAgICAgICAgIH0pOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgIndvcmRMaW1pdCI6CiAgICAgICAgICAvLyDmlbDlrZfojIPlm7Tpqozor4EKICAgICAgICAgIGlzQ2hlY2sgPSAhdmFsaWRhdG9yLmlzTGVuZ3RoKHZhbHVlLCB7CiAgICAgICAgICAgIG1pbjogcnVsZS5taW4sCiAgICAgICAgICAgIG1heDogcnVsZS5tYXgKICAgICAgICAgIH0pOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgImxpbWl0SW5wdXRUeXBlIjoKICAgICAgICAgIC8vIOato+WImemqjOivgQogICAgICAgICAgaXNDaGVjayA9ICFldmFsKHJ1bGUucGF0dGVybikudGVzdCh2YWx1ZSk7CiAgICAgICAgICBicmVhazsKICAgICAgfQoKICAgICAgcmV0dXJuIGlzQ2hlY2s7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;AAcA;AAEA;AACAA,kBADA;AAEAC;AACAC,aADA;AAEAC;AACAC,iBADA;AAEAC;AAAA;AAAA;AAFA,KAFA;AAMAC;AACAF,kBADA;AAEAC;AAFA;AANA,GAFA;AAaAE,MAbA,kBAaA;AACA;AACA;AACAC,2BAFA;AAGA;AACAC;AAJA;AAMA,GApBA;AAqBAC;AACA;AACAR,SAFA,iBAEAS,QAFA,EAEA;AACA;AACA;AAJA,GArBA;AA2BAC;AACAC,kBADA,4BACA;AACA;AACA,KAHA;;AAIA;AACA;AACA;AACAC,aAPA,qBAOAZ,KAPA,EAOA;AAAA;;AACA;AACA;AACA;AACA,OAFA;;AAGA;AACA;AACA;AACA;AACA;AACA,OALA,MAKA;AACA;AACA;AACA;AACA;AACA;AACA,KAvBA;;AAwBA;AACA;AACA;AACA;AACAa,kBA5BA,0BA4BAC,IA5BA,EA4BAd,KA5BA,EA4BA;AACA;;AACA;AACA;AACA;AACAe;AACA;;AACA;AACA;AACAA;AAAAC;AAAAC;AAAA;AACA;;AACA;AACA;AACAF;AACAC,yBADA;AAEAC;AAFA;AAIA;;AACA;AACA;AACAF;AACA;AAnBA;;AAqBA;AACA;AApDA;AA3BA","names":["name","props","value","rules","type","default","prop","data","validateClassName","errorMessage","watch","newValue","methods","tiggerValidate","validator","validatorCheck","rule","isCheck","min","max"],"sourceRoot":"src/components","sources":["validate.vue"],"sourcesContent":["\n<template>\n  <div class=\"validate\">\n    <div :class=\"validateClassName\">\n      <slot></slot>\n    </div>\n    <div class=\"rule\" v-if=\"validateClassName\">\n      {{ \n        errorMessage\n      }} \n    </div>\n  </div>\n</template>\n<script>\nimport validator from \"validator\";\n\nexport default {\n  name: \"validate\",\n  props: {\n    value: {},\n    rules: {\n      type: Array,\n      default: () => [],\n    },\n    prop: {\n      type: String,\n      default: \"\",\n    },\n  },\n  data() {\n    return {\n      // 校验类名 是否正确\n      validateClassName: \"\",\n      // 错误提示\n      errorMessage: \"\",\n    };\n  },\n  watch: {\n    // 监听值变化 触发校验规则\n    value(newValue) {\n      this.validator(newValue);\n    },\n  },\n  methods: {\n    tiggerValidate(){\n      return this.validator(this.value)\n    },\n    /* 校验哪些规则\n     * @param {String} value 当前输入值\n     */\n    validator(value) {\n      // 所有的校验规则执行\n      const result = this.rules.find((item) => {\n        return item.checked ? this.validatorCheck(item, value) : false;\n      });\n      if (result) {\n        // 说明验证不通过\n        this.errorMessage = result.message;\n        this.validateClassName = \"content\";\n        return false\n      } else {\n        // 验证通过\n        this.message = \"\";\n        this.validateClassName = \"\";\n        return true;\n      }\n    },\n    /* 验证每一项规则\n     * @param {Array} rule 校验规则\n     * @param {String} value 当前输入值\n     */\n    validatorCheck(rule, value) {\n      let isCheck = false;\n      switch (rule.type) {\n        case \"required\":\n          // 必填验证\n          isCheck = validator.isEmpty(value);\n          break;\n        case \"limitNumbers\":\n          // 数值验证\n          isCheck = !validator.isFloat(value.toString(), { min: rule.min, max: rule.max });\n          break;\n        case \"wordLimit\":\n          // 数字范围验证\n          isCheck = !validator.isLength(value, {\n            min: rule.min,\n            max: rule.max,\n          });\n          break;\n        case \"limitInputType\":\n          // 正则验证\n          isCheck = !eval(rule.pattern).test(value);\n          break;\n      }\n      return isCheck;\n    },\n  },\n};\n</script>\n<style scoped lang=\"less\">\n.content {\n  > * {\n    border: 1px solid #e25246 !important ;\n    box-shadow: 0 0 0 2px rgba(226, 82, 70, 0.3) !important;\n  }\n}\n.rule {\n  color: #e25246;\n  transition: color 0.3s cubic-bezier(0.4, 0, 1, 1);\n}\n</style>\n"]}]}